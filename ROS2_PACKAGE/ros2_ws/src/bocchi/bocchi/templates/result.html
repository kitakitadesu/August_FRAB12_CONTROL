<%!
    import builtins
    str = builtins.str
    isinstance = builtins.isinstance
    hasattr = builtins.hasattr
    len = builtins.len
%>
% if success:
<div role="alert" style="border: 2px solid #006600; background: #f0fff0; padding: 0.75rem; margin: 0.5rem 0;">
    <div style="border-bottom: 1px solid #006600; padding-bottom: 0.25rem; margin-bottom: 0.5rem;">
        <p style="margin: 0; color: #006600;"><strong>✅ SUCCESS</strong></p>
    </div>
    <p style="margin: 0; color: #004400;"><strong>${message or 'Operation completed successfully'}</strong></p>
    % if 'data' in context._data and data:
        <details style="margin-top: 0.75rem; border: 1px solid #006600; padding: 0.25rem;">
            <summary style="cursor: pointer; font-weight: bold; padding: 0.25rem; background: #e8ffe8; border: 1px solid #006600;">
                <strong>📋 Response Data</strong>
            </summary>
            <div style="border: 1px solid #cccccc; margin-top: 0.5rem; padding: 0.5rem; background: #fafafa;">
                % if isinstance(data, dict):
                    <table border="1" cellpadding="4" cellspacing="0" style="width: 100%; font-size: 0.9em;">
                        <thead>
                            <tr style="background: #f0f0f0;">
                                <th style="text-align: left; border: 1px solid #999;">Property</th>
                                <th style="text-align: left; border: 1px solid #999;">Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            % for key, value in data.items():
                            <tr>
                                <td style="border: 1px solid #ccc; font-weight: bold;">${key}</td>
                                <td style="border: 1px solid #ccc; font-family: monospace;">${value}</td>
                            </tr>
                            % endfor
                        </tbody>
                    </table>
                % else:
                    <div style="font-family: monospace; background: #ffffff; border: 1px inset #ccc; padding: 0.5rem;">
                        <p style="margin: 0;">${str(data)}</p>
                    </div>
                % endif
            </div>
        </details>
    % endif
</div>
% else:
<div role="alert" style="border: 2px solid #cc0000; background: #fff0f0; padding: 0.75rem; margin: 0.5rem 0;">
    <div style="border-bottom: 1px solid #cc0000; padding-bottom: 0.25rem; margin-bottom: 0.5rem;">
        <p style="margin: 0; color: #cc0000;"><strong>❌ ERROR</strong></p>
    </div>
    <p style="margin: 0; color: #880000;"><strong>${error or 'Unknown error occurred'}</strong></p>
    % if 'details' in context._data and details:
        <details style="margin-top: 0.75rem; border: 1px solid #cc0000; padding: 0.25rem;">
            <summary style="cursor: pointer; font-weight: bold; padding: 0.25rem; background: #ffe8e8; border: 1px solid #cc0000;">
                <strong>🔍 Error Details</strong>
            </summary>
            <div style="border: 1px solid #cccccc; margin-top: 0.5rem; padding: 0.5rem; background: #fafafa;">
                <div style="font-family: monospace; background: #ffffff; border: 1px inset #ccc; padding: 0.5rem;">
                    <p style="margin: 0; color: #660000;">${details}</p>
                </div>
            </div>
        </details>
    % endif
</div>
% endif

% if 'timestamp' in context._data and timestamp:
<footer style="border-top: 1px solid #ccc; margin-top: 0.5rem; padding-top: 0.25rem;">
    <div style="text-align: right;">
        <small style="color: #666; font-family: monospace; font-size: 0.8em;">
            <strong>🕒 Timestamp:</strong> <time datetime="${timestamp}">${timestamp}</time>
        </small>
    </div>
</footer>
% endif